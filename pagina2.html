<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Página 2 - Verificando Acesso</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  
  <style>
    /* Estilos base e AdBlock (combinados) */
    :root {
        --color-primary: #007bff;
        --color-danger: #e53e3e;
        --color-background: #f4f7f9;
        --color-card-background: #ffffff;
        --color-text: #343a40;
        --color-text-light: #6c757d;
        --shadow: 0 8px 20px rgba(0, 0, 0, 0.07);
        --border-radius: 12px;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
        font-family: 'Poppins', sans-serif;
        background-color: var(--color-background);
        color: var(--color-text);
        text-align: center;
        padding: 20px;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
    }

    /* Banner fixo de AD */
    .banner-fixo {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        background: #fff;
        z-index: 1000;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 50px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    /* Layout do Card */
    .card {
        background: var(--color-card-background);
        border-radius: var(--border-radius);
        box-shadow: var(--shadow);
        padding: 25px;
        width: 100%;
        max-width: 500px;
        margin-top: 70px; /* Espaço para o banner fixo */
        animation: fadeIn 0.5s ease-out;
    }
    @keyframes fadeIn {
      from {opacity: 0; transform: translateY(15px);}
      to {opacity: 1; transform: translateY(0);}
    }
    
    h1 {
        color: var(--color-text);
        font-weight: 700;
        font-size: 1.6em;
        margin-bottom: 5px;
    }
    p {
        color: var(--color-text-light);
        font-size: 1em;
        margin-bottom: 20px;
    }
    
    /* Círculo do Contador (MANTIDO, MAS OCULTADO PELO JS, APENAS POR GARANTIA) */
    .circle {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        display: grid;
        place-items: center;
        background: conic-gradient(var(--color-primary) calc(var(--progress) * 1%), #e0e0e0 0);
        font-size: 2.5em;
        font-weight: 700;
        color: var(--color-primary);
        margin: 20px auto;
        transition: background 0.3s;
        /* Adicionado estilo para garantir que não apareça */
        display: none !important;
    }

    /* Card de Notícia */
    .conteudo-card {
        background: #f9f9f9;
        border: 1px solid #eee;
        border-radius: var(--border-radius);
        padding: 15px;
        margin: 20px 0;
        text-align: left;
    }
    .conteudo-card h3 { font-size: 1.1em; color: var(--color-text); }
    .conteudo-card p { font-size: 0.9em; color: var(--color-text-light); margin-bottom: 10px; }
    .conteudo-card small { font-size: 0.8em; color: #aaa; }

    /* Botão de Continuar */
    .btn {
        background: linear-gradient(90deg, #007bff, #0056b3);
        color: white;
        padding: 16px 40px;
        border-radius: 50px;
        text-decoration: none;
        border: none;
        cursor: pointer;
        font-weight: 600;
        font-size: 1.1em;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(0, 123, 255, 0.2);
        display: none; /* Começa escondido */
        width: 100%;
    }
    .btn:hover {
        filter: brightness(1.1);
        transform: translateY(-2px);
    }
    .btn.show {
        display: inline-block;
        animation: fadeIn 0.5s;
    }

    .banner-native {
        width: 100%;
        min-height: 50px;
        margin: 25px auto 0 auto;
    }
    
    footer {
        margin-top: 20px;
        font-size: 0.8em;
        color: #aaa;
    }

    /* Modal de AdBlock */
    .adblock-modal-overlay {
      position: fixed; top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: rgba(0, 0, 0, 0.85);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      padding: 20px;
      box-sizing: border-box;
      backdrop-filter: blur(5px);
    }
    .adblock-modal-content {
      background-color: #fff; padding: 35px 25px;
      border-radius: 15px; max-width: 400px;
      width: 100%; text-align: center;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }
    .adblock-modal-content .icon {
      width: 90px; height: 90px;
      margin: 0 auto 20px auto;
      background-color: #fbecec;
      border: 5px solid var(--color-danger);
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      color: var(--color-danger);
    }
    .adblock-modal-content .icon svg { width: 45px; height: 45px; }
    .adblock-modal-content h2 { font-size: 1.6em; color: #333; margin-bottom: 12px; }
    .adblock-modal-content p { color: #555; font-size: 1em; line-height: 1.5; margin-bottom: 20px; }
    .adblock-refresh-button {
      display: inline-block; background-color: #2d8a5b;
      color: white; padding: 12px 30px;
      border-radius: 50px; font-weight: 600;
      text-decoration: none; cursor: pointer;
    }
  </style>
</head>
<body>
  
  <div class="adblock-modal-overlay" id="adblock-modal">
      <div class="adblock-modal-content">
          <div class="icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M15.936 2.5L21.5 8.064V15.936L15.936 21.5H8.064L2.5 15.936V8.064L8.064 2.5H15.936ZM15 17H9V19H15V17ZM15 5H9V15H15V5Z"></path></svg>
          </div>
          <h2>AdBlocker Detectado!</h2>
          <p>Para continuar e liberar seu link, por favor, desative seu bloqueador de anúncios e atualize a página.</p>
          <a class="adblock-refresh-button" onclick="location.reload()">Atualizar Página</a>
      </div>
  </div>

  <div class="banner-fixo" id="banner-fixo-ads">
      <script type="text/javascript">
          atOptions = { 'key' : '5aed398ecdebf38696b5a0131d685b5b', 'format' : 'iframe', 'height' : 50, 'width' : 320, 'params' : {} };
      </script>
      <script type="text/javascript" src="//www.highperformanceformat.com/5aed398ecdebf38696b5a0131d685b5b/invoke.js"></script>
  </div>

  <div class="card">
    <h1 id="titulo">Preparando seu link...</h1>
    <p id="subtexto">Enquanto isso, leia uma notícia:</p>
    
    <div id="circle" class="circle" style="--progress:0"></div> 
    
    <div id="area-conteudo" class="conteudo-card" style="display: none;">
        <h3 id="conteudo-titulo">Carregando notícia...</h3>
        <p id="conteudo-texto"></p>
        <small id="conteudo-fonte"></small>
    </div>

    <button id="botao" class="btn">CONTINUAR PARA O DOWNLOAD</button>
    
    <div class="banner-native" id="banner-native-ads">
      <script async="async" data-cfasync="false" src="//pl27806509.effectivegatecpm.com/fc9e45b5ad616584db5c86a8934458a0/invoke.js"></script>
      <div id="container-fc9e45b5ad616584db5c86a8934458a0"></div>
    </div>
    
    <footer>© 2025 EricDfpXproads. Todos os direitos reservados.</footer>
  </div>

  <script type='text/javascript' src='//pl27806574.effectivegatecpm.com/5c/d9/9e/5cd99e5c3ffff1cc40d62cb9be9886f7.js'></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', () => {
        
        // --- DETECTOR DE ADBLOCK ---
        setTimeout(() => {
            const bannerFixo = document.getElementById('banner-fixo-ads');
            const bannerNativo = document.getElementById('banner-native-ads');
            
            // Verifica se algum dos banners foi bloqueado (altura < 10px)
            if (bannerFixo.offsetHeight < 10 || bannerNativo.offsetHeight < 10) {
                console.log("AdBlocker DETECTADO!");
                document.getElementById('adblock-modal').style.display = 'flex';
                document.body.style.overflow = 'hidden';
            } else {
                console.log("AdBlocker não detectado. Iniciando lógica da página (Rolagem).");
                iniciarLogicaDaPagina(); // Inicia a página
            }
        }, 1500); // 1.5s de delay para dar tempo do AdBlock agir
        
        
        // --- SEU SMART LINK ---
        const smartLinkUrl = 'https://victimfatalsentiments.com/fxgzhb5e?key=3823c25827101f6ca9e1188db300506f';

        // --- Suas chaves de API ---
        const NEWS_API_KEY = '76f6c27aa4214115aa6a9e9552c5e27f';
        const GNEWS_API_KEY = 'c9cf618948f565395e7dadae66637268';

        // --- "Trabalhadores" de notícias ---
        // (Funções de busca de notícias mantidas como no seu original)
        const fetchFromNewsAPI = async () => { const url = `https://newsapi.org/v2/top-headlines?country=br&pageSize=10&apiKey=${NEWS_API_KEY}`; const response = await fetch(url); if (!response.ok) throw new Error(`NewsAPI falhou`); const data = await response.json(); const article = data.articles[Math.floor(Math.random() * data.articles.length)]; return { title: article.title, description: article.description || "Clique para ler a matéria completa.", source: `Fonte: ${article.source.name}`, url: article.url }; };
        const fetchFromGNews = async () => { const url = `https://gnews.io/api/v4/top-headlines?country=br&lang=pt&max=10&apikey=${GNEWS_API_KEY}`; const response = await fetch(url); if (!response.ok) throw new Error(`GNews falhou`); const data = await response.json(); const article = data.articles[Math.floor(Math.random() * data.articles.length)]; return { title: article.title, description: article.description || "Clique para ler a matéria completa.", source: `Fonte: ${article.source.name}`, url: article.url }; };
        const fetchFromG1RSS = async () => { const rssUrl = 'https://g1.globo.com/rss/g1/'; const apiUrl = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rssUrl)}`; const response = await fetch(apiUrl); if (!response.ok) throw new Error("RSS2JSON (G1) falhou"); const data = await response.json(); const item = data.items[Math.floor(Math.random() * data.items.length)]; return { title: item.title, description: item.description.replace(/<[^>]*>?/gm, '').substring(0, 200) + '...', source: "Fonte: G1 (via RSS)", url: item.link }; };
        
        // --- Gerente de Notícias ---
        const carregarNoticias = async () => {
            let sources = [fetchFromNewsAPI, fetchFromGNews, fetchFromG1RSS];
            sources.sort(() => Math.random() - 0.5); // Embaralha as fontes
            for (const fetchFunction of sources) {
                try {
                    const noticia = await fetchFunction();
                    document.getElementById('conteudo-titulo').textContent = noticia.title;
                    document.getElementById('conteudo-texto').textContent = noticia.description;
                    document.getElementById('conteudo-fonte').textContent = noticia.source;
                    const areaConteudo = document.getElementById('area-conteudo');
                    areaConteudo.style.display = 'block';
                    areaConteudo.style.cursor = 'pointer';
                    areaConteudo.onclick = () => { window.open(noticia.url, '_blank'); };
                    return; // Para quando a primeira notícia for carregada
                } catch (error) {
                    console.error(`Falha ao buscar de uma fonte: ${error.message}`);
                }
            }
            console.error("Todas as fontes de notícias falharam.");
            document.getElementById('area-conteudo').style.display = 'none'; // Esconde se tudo falhar
        };

        // --- Função principal (SEM CONTADOR) ---
        function iniciarLogicaDaPagina() {
            carregarNoticias(); // Começa a carregar as notícias

            const circle = document.getElementById("circle");
            const botao = document.getElementById("botao");
            const titulo = document.getElementById("titulo");
            const subtexto = document.getElementById("subtexto");
            const areaConteudo = document.getElementById('area-conteudo');
            const urlParams = new URLSearchParams(window.location.search);
            const destino = urlParams.get('destino');
            
            // 1. Oculta o Círculo imediatamente
            if (circle) circle.style.display = "none";
            
            // 2. Atualiza os textos
            if (titulo) titulo.textContent = "Verifique o seu acesso.";
            if (subtexto) subtexto.textContent = "Role a página para baixo para liberar o botão.";
            
            // 3. Mostra a área de Notícias
            if (areaConteudo) areaConteudo.style.display = 'block';

            // 4. Lógica de Rolagem para liberar o botão
            const liberarBotao = () => {
                // Altura total do conteúdo menos a altura visível (o que pode ser rolado)
                const alturaTotal = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                const rolagemAtual = window.scrollY;
                
                // Define que o botão libera se o usuário rolar pelo menos 80% da página
                const rolagemMinima = 0.8; 
                const rolagemProgress = rolagemAtual / alturaTotal;
                
                if (rolagemProgress >= rolagemMinima) {
                    // Remove o listener para que a função só execute uma vez
                    window.removeEventListener('scroll', liberarBotao);
                    
                    // Ativa o botão
                    if (botao) {
                        botao.classList.add("show");
                        titulo.textContent = "Seu acesso está liberado!";
                        subtexto.textContent = "Clique em 'Continuar' para finalizar o processo.";
                        
                        // Rola suavemente para o botão (melhora a UX)
                        botao.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }
            };
            
            // Adiciona o evento de rolagem
            window.addEventListener('scroll', liberarBotao);


            // --- LÓGICA DO BOTÃO FINAL ---
            if (botao) {
                botao.addEventListener("click", () => {
                    // 1. Abre o Smart Link em nova aba
                    window.open(smartLinkUrl, '_blank');
                    
                    // 2. Redireciona a aba atual para pagina3
                    window.location.href = `pagina3.html?destino=${encodeURIComponent(destino || '')}`;
                });
            }
        }
    });
  </script>
</body>
</html>
